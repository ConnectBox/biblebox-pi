language: bash
sudo: required
dist: trusty
before_install:
- sudo apt-get -qq update
install:
- wget -O /tmp/vagrant.deb https://releases.hashicorp.com/vagrant/1.8.7/vagrant_1.8.7_x86_64.deb
- sudo dpkg -i /tmp/vagrant.deb
- vagrant plugin install vagrant-aws
- vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box
- sudo pip install -r requirements.txt
script:
- 'if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then $TRAVIS_BUILD_DIR/ci/script_run_on_pull_requests.sh; fi'
- 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then $TRAVIS_BUILD_DIR/ci/script_run_on_non_pull_requests.sh; fi'
- pushd $TRAVIS_BUILD_DIR && ansible-lint -x ANSIBLE0004,ANSIBLE0012 --exclude=ansible/roles/mikegleasonjr.firewall
  --exclude=ansible/roles/geerlingguy.nginx ansible/site.yml && popd
after_script:
- pushd $TRAVIS_BUILD_DIR/ci && vagrant destroy && popd
